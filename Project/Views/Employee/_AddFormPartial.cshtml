@*@model List<Employee>*@
@{
	ViewData["Title"] = "Employees";
	ViewData["ActiveLink"] = "employee";
	//SelectList deptItems = new SelectList(ViewBag.DeptList, "Id", "Name");
	List<Department> departmentsList = ViewData["departmentsList"] as List<Department>;
}

<div class="modal fade" id="kt_modal_add_customer" tabindex="-1" style="display: none;" aria-hidden="true">
	<!--begin::Modal dialog-->
	<div class="modal-dialog modal-dialog-centered mw-650px" data-select2-id="select2-data-78-wa3i">
		<!--begin::Modal content-->
		<div class="modal-content">
			<!--begin::Form-->

			<form class="form fv-plugins-bootstrap5 fv-plugins-framework" id="kt_modal_add_customer_form"
				  asp-controller="Employee" asp-action="New" method="post">
				<!--begin::Modal header-->
				<div class="modal-header" id="kt_modal_add_customer_header">
					<!--begin::Modal title-->
					<h2 class="fw-bolder">Add an Employee</h2>
					<!--end::Modal title-->
					<!--begin::Close-->
					<div id="kt_modal_add_customer_close" class="btn btn-icon btn-sm btn-active-icon-primary">
						<!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
						<span class="svg-icon svg-icon-1">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
								<rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"></rect>
								<rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"></rect>
							</svg>
						</span>
						<!--end::Svg Icon-->
					</div>
					<!--end::Close-->
				</div>
				<!--end::Modal header-->
				<!--begin::Modal body-->
				<div class="modal-body py-10 px-lg-17">
					<!--begin::Scroll-->
					<div class="scroll-y me-n7 pe-7" id="kt_modal_add_customer_scroll" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto" data-kt-scroll-dependencies="#kt_modal_add_customer_header" data-kt-scroll-wrappers="#kt_modal_add_customer_scroll" data-kt-scroll-offset="300px" style="max-height: 229px;" data-select2-id="select2-data-kt_modal_add_customer_scroll">
						<div class="row">
							<div class="col-12 col-md-6">
								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Name</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required type="text" class="form-control form-control-solid" placeholder="Employee Name" name="Name" value="Sample Name">
									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->
							</div>
							<div class="col-12 col-md-6">
								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">National ID</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required type="text" class="form-control form-control-solid" placeholder="National ID" name="national_number" pattern="\d{14}" oninvalid="setCustomValidity('Please enter a 14-digit number.')" oninput="setCustomValidity('')" value="12345678901234">
									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->
							</div>
						</div>


						<div class="row">
							<div class="col-12 col-md-6">
								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Address</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required type="text" class="form-control form-control-solid" placeholder="Address" name="address" value="Cairo">
									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->
							</div>
							<div class="col-12 col-md-6">

								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Phone</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required type="text" class="form-control form-control-solid" placeholder="Phone number" name="phone" pattern="01\d{9}" oninvalid="setCustomValidity('Please enter a 9-digit number that starts with (01).')" oninput="setCustomValidity('')" value="01001234567">
									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->
							</div>
						</div>



						<div class="row">
							<div class="col-12 col-md-6">
								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Gender</label>
									<!--end::Label-->
									<select required class="form-select form-select-solid" data-control="select2" data-placeholder="Select an option" name="gender" value="male">
										<option></option>
										<option value="male">Male</option>
										<option value="female">Female</option>
									</select>
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->

							</div>
							<div class="col-12 col-md-6">
								<!--begin::Input group-->
								<div class="fv-row mb-7 fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Nationality</label>
									<!--end::Label-->
									<input required type="text" class="form-control form-control-solid" placeholder="Nationality" name="nationality" value="Egyptian">
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Input group-->
							</div>

						</div>


						<!--begin::Input group-->
						<div class="fv-row mb-7 fv-plugins-icon-container">
							<!--begin::Label-->
							<label class="required fs-6 fw-bold mb-2">Birth date</label>
							<!--end::Label-->
							<div class="mb-0">
								<input required class="form-control form-control-solid custom_date_picker" placeholder="Pick a date" name="birth_date" value="01/11/2000 12:00:00 AM" />
							</div>
							<div class="fv-plugins-message-container invalid-feedback"></div>
						</div>
						<!--end::Input group-->
						<!--begin::Billing toggle-->
						<div class="fw-bolder fs-3 rotate collapsible mb-7" data-bs-toggle="collapse" href="#kt_modal_add_customer_billing_info" role="button" aria-expanded="false" aria-controls="kt_customer_view_details">
							Work Information
							<span class="ms-2 rotate-180">
								<!--begin::Svg Icon | path: icons/duotune/arrows/arr072.svg-->
								<span class="svg-icon svg-icon-3">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
										<path d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z" fill="black"></path>
									</svg>
								</span>
								<!--end::Svg Icon-->
							</span>
						</div>
						<!--end::Billing toggle-->
						<!--begin::Billing form-->
						<div id="kt_modal_add_customer_billing_info" class="collapse show" data-select2-id="select2-data-kt_modal_add_customer_billing_info">


							<div class="row g-9 mb-7">
								<!--begin::Col-->
								<div class="col-md-6 fv-row fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Attend From</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required id="attend_from" class="form-control form-control-solid flatpickr-input custom_time_picker" placeholder="Pick date" type="text" name="attend_from" value="8:00">
									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Col-->
								<!--begin::Col-->
								<div class="col-md-6 fv-row fv-plugins-icon-container">
									<!--begin::Label-->
									<label class="required fs-6 fw-bold mb-2">Attend To</label>
									<!--end::Label-->
									<!--begin::Input-->
									<input required id="attend_to" class="form-control form-control-solid flatpickr-input custom_time_picker" placeholder="Pick date" type="text" name="attend_to" value="14:00">

									<!--end::Input-->
									<div class="fv-plugins-message-container invalid-feedback"></div>
								</div>
								<!--end::Col-->
							</div>

							<!--begin::Input group-->
							<div class="fv-row mb-7 fv-plugins-icon-container">
								<!--begin::Label-->
								<label class="required fs-6 fw-bold mb-2">Department</label>
								<!--end::Label-->
								<select required id="addEmpDeptSelect" class="form-select form-select-solid" data-control="select2" data-placeholder="Select an option" name="dept_id" value="1">
									<option></option>
									@foreach (var department in departmentsList)
									{
										<option value="@department.Id">@department.Name</option>
									}
								</select>
								<div class="fv-plugins-message-container invalid-feedback"></div>
							</div>
							<!--end::Input group-->

							<div class="row">
								<div class="col-12 col-md-6">
									<!--begin::Input group-->
									<div class="fv-row mb-7 fv-plugins-icon-container">
										<!--begin::Label-->
										<label class="required fs-6 fw-bold mb-2">Job Title</label>
										<!--end::Label-->
										<!--begin::Input-->
										<input required type="text" class="form-control form-control-solid" placeholder="Job Title" name="job_title" value="Accountant">
										<!--end::Input-->
										<div class="fv-plugins-message-container invalid-feedback"></div>
									</div>
									<!--end::Input group-->
								</div>
								<div class="col-12 col-md-6">

									<!--begin::Input group-->
									<div class="fv-row mb-7 fv-plugins-icon-container">
										<!--begin::Label-->
										<label class="required fs-6 fw-bold mb-2">Salary</label>
										<!--end::Label-->
										<input required class="form-control form-control-solid" placeholder="Salary" name="salary" type="number" value="5000">
										<div class="fv-plugins-message-container invalid-feedback"></div>
									</div>
									<!--end::Input group-->
								</div>
							</div>



							<!--begin::Input group-->
							<div class="fv-row mb-7 fv-plugins-icon-container">
								<!--begin::Label-->
								<label class="required fs-6 fw-bold mb-2">Contract date</label>
								<!--end::Label-->
								<div class="mb-0">
									<input required class="form-control form-control-solid custom_date_picker" placeholder="Pick a date" name="hire_date" value="2022-12-01" />
								</div>
								<div class="fv-plugins-message-container invalid-feedback"></div>
							</div>
							<!--end::Input group-->


						</div>
						<!--end::Billing form-->
					</div>
					<!--end::Scroll-->
				</div>
				<!--end::Modal body-->
				<!--begin::Modal footer-->
				<div class="modal-footer flex-center">
					<!--begin::Button-->
					<button type="reset" id="kt_modal_add_customer_cancel" class="btn btn-light me-3">Discard</button>
					<!--end::Button-->
					<!--begin::Button-->
					<button type="submit" id="kt_modal_add_customer_submit" class="btn btn-primary">
						<span class="indicator-label">Submit</span>
						<span class="indicator-progress">
							Please wait...
							<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
						</span>
					</button>
					<!--end::Button-->
				</div>
				<!--end::Modal footer-->
				<div></div>
			</form>
			<!--end::Form-->
		</div>
	</div>
</div>





@section js{

	<script>
		document.getElementById('attend_to').addEventListener('change', function () {
			var attendFromInput = document.getElementById('attend_from');
			var attendFromValue = attendFromInput.value;

			// Compare the values of "Attend From" and "Attend To" and update "Attend From" if necessary
			if (attendFromValue >= this.value) {
				var newAttendFromValue = incrementTime(this.value);
				attendFromInput.value = newAttendFromValue;
			}
		});

		document.getElementById('attend_from').addEventListener('change', function () {
			var attendToInput = document.getElementById('attend_to');
			var attendToValue = attendToInput.value;

			// Compare the values of "Attend From" and "Attend To" and update "Attend To" if necessary
			if (this.value >= attendToValue) {
				var newAttendToValue = incrementTime(this.value);
				attendToInput.value = newAttendToValue;
			}
		});

		function incrementTime(time) {
			var [hours, minutes] = time.split(':').map(Number);
			hours = (hours + 1) % 24;
			return hours.toString().padStart(2, '0') + ':' + minutes.toString().padStart(2, '0');
		}


	</script>

}